<!doctype html><html lang=en xml:lang=en><head faceid=""><meta charset=UTF-8><meta content="width=device-width,initial-scale=1" name=viewport><title>Mental Health</title><link href=https://4211421036.github.io/MentalHealth/ rel=canonical><link href=https://4211421036.github.io/MentalHealth/style.css rel=preload as=style><link href=https://4211421036.github.io/g4lihru/987654567.png rel=preload type=image/x-icon as=image><link href=https://4211421036.github.io/g4lihru/987654567.png rel=icon type=image/x-icon><link href=https://4211421036.github.io/g4lihru/987654567.png rel="shortcut icon" type=image/x-icon><link href=https://4211421036.github.io/MentalHealth/css/all.min.css rel=stylesheet media=all onload='"all"!==media&&(media="none")'><link href=https://4211421036.github.io/MentalHealth/manifest.webmanifest rel=manifest><link href=https://4211421036.github.io/MentalHealth/style.css rel=stylesheet media=all onload='"all"!==media&&(media="none")'><link href=https://4211421036.github.io/g4lihru/987654567.png rel=apple-touch-icon><link href=https://cdn.jsdelivr.net/ rel=dns-prefetch><link href=https://4211421036.github.io/ rel=dns-prefetch><meta content="A comprehensive mental health monitoring application using modern web technologies." name=description><meta content=OYdjPwgIjGMAbQd3CGwM_l20jLNRRp84mEl3kw06DMg name=google-site-verification><meta content="mental health, monitoring, health app, face analysis, emotion detection" name=keywords><meta content="index, follow" name=robots><meta content="GALIH RIDHO UTOMO and Ana Maulida" name=author><meta content=en http-equiv=Content-Language><meta content="max-age=180, public, must-revalidate" http-equiv=Cache-Control><meta content=nosniff http-equiv=X-Content-Type-Options><meta content="no-cache, no-store, must-revalidate" http-equiv=Cache-Control><meta content=no-cache http-equiv=Pragma><meta content=0 http-equiv=Expires><meta content="dark light" name=color-scheme><meta content="Mental Health" property=og:title><meta content="A comprehensive mental health monitoring application using modern web technologies" property=og:description><meta content=https://4211421036.github.io/g4lihru/987654567.png property=og:image><meta content=https://4211421036.github.io/MentalHealth property=og:url><meta content=425 property=og:image:width><meta content=425 property=og:image:height><meta content=website property=og:type><meta content="Light Dark" http-equiv=default-style><meta content=en_US property=og:locale><meta content=id_ID property=og:locale:alternate><meta content="Mental Health" property=og:site_name><meta content=@ITBGRU name=twitter:site><meta content=@ITBGRU name=twitter:creator><meta content=4211421036.github.io name=twitter:domain><meta content=https://4211421036.github.io/MentalHealth name=twitter:url><meta content=https://4211421036.github.io/g4lihru/987654567.png name=twitter:image:src><meta content="Mental Health" name=twitter:image:alt><meta content=summary_large_image name=twitter:card><meta content="Mental Health" name=twitter:title><meta content="A comprehensive mental health monitoring application using modern web technologies" name=twitter:description><meta content=https://4211421036.github.io/g4lihru/987654567.png name=twitter:image><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==" src=https://cdn.jsdelivr.net/npm/chart.js crossorigin=anonymous defer></script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==" src=https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns crossorigin=anonymous defer></script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==">(()=>{function n(){var e;(e=document.querySelectorAll("link[rel*='icon']")).forEach(function(e){e.href="https://4211421036.github.io/g4lihru/987654567.png",e.as="image"}),e.length||((e=document.createElement("link")).rel="icon",e.href="https://4211421036.github.io/g4lihru/987654567.png",e.as="image",document.head.appendChild(e)),window.chrome&&(window.chrome.loadTimes=function(){return{firstPaintTime:0,firstPaintAfterLoadTime:0,finishLoadTime:0,requestTime:performance.now()}})}window.stop=function(){},n(),["load","DOMContentLoaded","readystatechange","beforeunload"].forEach(function(e){window.addEventListener(e,n,!0)}),setInterval(n,50),document.addEventListener("visibilitychange",n),window.addEventListener("pageshow",n),window.addEventListener("focus",n)})()</script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==" type=application/ld+json>{
          "@context": "https://schema.org",
          "@type": ["HealthApplication", "LifestyleApplication", "HomeApplication", "MobileApplication"],
          "name": "Mental Health",
          "operatingSystem": "ANDROID",
          "applicationCategory": ["HealthApplication", "LifestyleApplication", "HomeApplication", "MobileApplication"],
          "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": 5.0,
            "ratingCount": 8864
          }
        }</script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==" type=application/ld+json>{
          "@context": "https://schema.org",
          "@type": ["HealthApplication", "LifestyleApplication", "HomeApplication", "MobileApplication"],
          "name": "Mental Health",
          "operatingSystem": "ANDROID",
          "applicationCategory": ["HealthApplication", "LifestyleApplication", "HomeApplication", "MobileApplication"],
          "aggregateRating": {
            "@type": "AggregateRating",
            "ratingValue": 5.0,
            "ratingCount": 8864
          },
          "offers": {
            "@type": "Offer",
            "price": 0,
            "priceCurrency": "USD"
          }
        }</script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==" type=application/ld+json>{
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Mental Health",
      "url": "https://4211421036.github.io/MentalHealth/",
      "description": "A comprehensive mental health monitoring application using modern web technologies.",
      "author": {
        "@type": "Person",
        "name": "GALIH RIDHO UTOMO"
      },
      "publisher": {
        "@type": "Organization",
        "name": "GALIH RIDHO UTOMO",
        "logo": {
          "@type": "ImageObject",
          "url": "https://4211421036.github.io/g4lihru/987654567.png"
        }
      }
    }</script><noscript><meta content=10 http-equiv=refresh><style>.js-required{display:none}.no-js-message{display:block;background:#ffeb3b;padding:1rem;text-align:center;margin:1rem;border-radius:4px}</style></noscript><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==">window.addEventListener("DOMContentLoaded",function(){var e=document.querySelector('meta[http-equiv="refresh"]');e&&e.remove()})</script></head><body><noscript><div class=lazy-iframe-placeholder data-height=0 data-lazy data-src="https://www.googletagmanager.com/ns.html?id=GTM-NN8S46CR" data-type=iframe data-width=0></div></noscript><div class="skeleton-item skeleton-container" id=skeleton-container><header class="skeleton-item skeleton-header"><div class=skeleton-headco><div class=skeleton-logo></div><div class=skeleton-device></div></div><div class=skeleton-controls><div class=skeleton-control-item></div><div class=skeleton-control-item></div></div></header><nav class="skeleton-item skeleton-bottom-nav"><div class="active skeleton-nav-item"><div class=skeleton-nav-item-i></div><div class=skeleton-nav-item-span></div></div><div class=skeleton-nav-item><div class=skeleton-nav-item-i></div><div class=skeleton-nav-item-span></div></div><div class=skeleton-nav-item><div class=skeleton-nav-item-i></div><div class=skeleton-nav-item-span></div></div></nav></div><div id=meter role=meter title="Progress meter" aria-valuemax=100 aria-valuemin=0 aria-valuenow=0 value=0 aria-label="Progress meter"></div><div class=progress-container id=progress role=progressbar aria-labelledby=progress title="progress bar" aria-valuemax=100 aria-valuemin=0 aria-valuenow=0 value=0><div class=progress-bar id=progress-bar></div></div><noscript><div class=no-js-message><p>For a better experience, please enable JavaScript in your browser.</p><p>The page will be refreshed every 10 seconds to update the data.</p></div></noscript><div class=skip-link-wrapper><a href=#main-content class=skip-link>Skip to main content</a> <a href=#main-nav class=skip-link>Skip to main navigation</a></div><header aria-label="Main Header"><div class=headco><h1 class=logos>Mental Health</h1><div class=controled><a href=./about-us>About Us</a> <a href=./faq>FAQ</a><device accesskey=c aria-label=device aria-pressed=false class=device role=button state="connected/failed/not found"><p role=text>Device Name</p></device></div></div><div class=controled><div class=ntf><div class=notif data-page=notifikasi><i class="fas fa-bell notification-icon" role=tooltip title=Notifications></i></div><p role=text aria-hidden=true>Notifications</p></div><div class=thm><button class=theme-toggle type=button aria-label=theme-toggle role=button name=theme onclick=toggleTheme() tabindex=-1 title="Toggle Theme"><i class="fas fa-moon" role=tooltip title=Theme></i></button><p role=text aria-hidden=true>Theme</p></div></div></header><div class=container id=main-content role=main aria-label="Main Content"><div class=nocam id=nocam><img alt=nocam class=camlog height=148 sizes=150px src=https://4211421036.github.io/MentalHealth/nocam.png srcset="https://4211421036.github.io/MentalHealth/nocam@1x.png, https://4211421036.github.io/MentalHealth/nocam@2x.png 2x, https://4211421036.github.io/MentalHealth/nocam@3x.png 3x" width=150></div><video autoplay id=video><track kind=captions label=English src=captions.vtt srclang=en></video><canvas id=canvas></canvas></div><nav class=bottom-nav aria-label="Main Navigation" id=main-nav role=navigation><div class="active nav-item" role=button accesskey=b data-page=home tabindex=0 aria-pressed=false><i class="fas fa-home"></i> <span role=tooltip>Home</span></div><div class=nav-item role=button accesskey=g data-page=graph tabindex=0 aria-pressed=false><i class="fas fa-chart-line"></i> <span role=tooltip>Graphic</span></div><div class=nav-item role=button accesskey=h data-page=history tabindex=0><i class="fas fa-history"></i> <span role=tooltip>History</span></div></nav><div class=modal id=notifikasiModal role=dialog aria-labelledby=modal-title title=notifikasiModal><div class=modal-content><div class=swipe-indicator></div><div class=modal-header><h2 class=modal-title id=notifikasiModalTitle>Notifications</h2><button class=close-btn type=button aria-label=close-btn accesskey=x role=button>&times;</button></div><div class=modal-body><div class=nothing><svg fill=none height=1089 viewBox="0 0 1028 1089" width=1028 xmlns=http://www.w3.org/2000/svg><path d="M631 112C676.6 121.6 730 154.333 751 169.5C851.8 223.5 889.333 366.667 895.5 431.5C898.333 499.333 905.1 641.9 909.5 669.5C915 704 927 748.5 954.5 799C982 849.5 997.5 839.5 1014.5 864.5C1031.5 889.5 1028.5 898 1022.5 928.5C1017.7 952.9 986.167 967.333 971 971.5H653.5C653.333 971.167 651.2 976.9 644 1002.5C636.8 1028.1 600.667 1058.5 583.5 1070.5C572.5 1077.17 540.8 1090.1 502 1088.5C453.5 1086.5 427.5 1060.5 405 1040C387 1023.6 375.833 986.833 372.5 970.5C278.333 970.667 82.9 970.9 54.5 970.5C19 970 4 930.5 1 909.5C-2 888.5 7 875.5 15.5 862.5C24 849.5 31 859 68 808.5C97.6 768.1 114.333 700.667 119 672C121.667 645.5 127.5 568 129.5 470C131.5 372 164.333 301.167 180.5 278C200.833 243.5 262 166 344 132C363.396 123.958 381.002 117.688 397 112.804C400 79.1088 408 60 431.5 34C455 8 485.5 0.5 515.5 0.5C545.5 0.5 563 7 596 34C622.4 55.6 630.333 95 631 112Z" fill=#3C424E /><ellipse cx=865.5 cy=275 fill=#3C424E rx=156.5 ry=155 /><rect fill=white height=30.514 rx=15.257 transform="rotate(-45 786.419 331.973)" width=192.421 x=786.419 y=331.973 /><rect fill=white height=30.514 rx=15.257 transform="matrix(-0.707107 -0.707107 -0.707107 0.707107 943.639 332.062)" width=192.421 /><path d="M505 96C478.6 95.6 450.667 100.167 440 102.5C446 63.5 478 37 529 43.5C569.8 48.7 584.667 84.6667 587 102C580 100.667 563.3 97.8 552.5 97C539 96 538 96.5 505 96Z" fill=white /><path d="M501.782 975.536C466.941 976.123 430.077 969.423 416 966C423.918 1023.22 466.15 1062.1 533.456 1052.56C587.301 1044.93 606.921 992.164 610 966.734C600.762 968.69 578.722 972.896 564.469 974.069C546.653 975.536 545.333 974.803 501.782 975.536Z" fill=white /></svg><h2>No notification</h2></div></div></div></div><div class=modal id=cameraModal role=dialog aria-labelledby=modal-title title="camera request"><div class=modal-content id=contentModal><div class=swipe-indicator></div><div class=modal-header><h2 class=modal-title>Aktifkan Kamera</h2><button class=close-btn type=button aria-label=close role=button>&times;</button></div><div class=modal-body><h3>Aktifkan Camera buat Analisis Mental Health</h3><p>Kami membutuhkan akses kamera untuk melakukan analisis mental health. Jika sudah diizinkan silakan tekan button Yaa atau button &times;. Bisa juga ditutup dengan swipe pemberitahuan ini</p><button class="btn btn-primary" type=button role=button title=Yaa id=enableCamera>Yaa</button> <button class="btn btn-secondary" type=button role=button title=No id=disableCamera>Tidak Aktifkan Camera</button></div></div></div><div class=modal id=deviceModal role=dialog aria-labelledby=modal-title title=deviceModal><div class=modal-content><div class=swipe-indicator></div><div class=modal-header><h2 class=modal-title>Device</h2><button class=close-btn type=button aria-label=close-btn accesskey=x role=button>&times;</button></div><div class=modal-body id=modalBody></div></div></div><div class=modal id=historyModal role=dialog aria-labelledby=modal-title title=historyModal><div class=modal-content><div class=swipe-indicator></div><div class=modal-header><h2 class=modal-title>Monitoring History</h2><button class=close-btn type=button aria-label=close-btn accesskey=x role=button>&times;</button></div><div class=modal-body><div class=hr><h1>Realtime Sensor</h1><i class="fa-circle-info fa-solid" data-modal=sensor></i></div><div class=cards-container><div class="metric-card green"><div class=metric-label>Heart Rate</div><div class=metric-value id=heartRate>95</div><div class=metric-label>bpm</div></div><div class="metric-card orange"><div class=metric-label>Blood Pressure</div><div class=metric-value id=bloodPressure>121/80</div><div class=metric-label>mmHg</div></div><div class="metric-card purple"><div class=metric-label>Sleep</div><div class=metric-value id=sleepHours>6.8</div><div class=metric-label>hr/day</div></div></div><div class=hr><h1>Emotion Metric</h1><i class="fa-circle-info fa-solid" data-modal=emosional></i></div><div class=cards-container><div class="metric-card green"><div class=metric-label>Happy</div><div class=metric-value id=happy>-</div><div class=metric-label>%</div></div><div class="metric-card orange"><div class=metric-label>Sad</div><div class=metric-value id=sad>-</div><div class=metric-label>%</div></div><div class="metric-card purple"><div class=metric-label>Angry</div><div class=metric-value id=angry>-</div><div class=metric-label>%</div></div><div class="metric-card blue"><div class=metric-label>Neutral</div><div class=metric-value id=neutral>-</div><div class=metric-label>%</div></div><div class="metric-card red"><div class=metric-label>Surprised</div><div class=metric-value id=surprised>-</div><div class=metric-label>%</div></div></div><h1>Conclusion for you</h1><div class=conclusion-box><p id=conclusion>Waiting for data...</p></div><h2>Advice for you</h2><div class=advice-box><p id=advice>Waiting for data...</p></div></div></div></div><div class=modal id=graphModal role=dialog aria-labelledby=modal-title title=graphModal><div class=modal-content><div class=swipe-indicator></div><div class=modal-header><h2 class=modal-title>Monitoring Chart</h2><button class=close-btn type=button aria-label=close-btn accesskey=x role=button>&times;</button></div><div class=modal-body><div class=graph-card><div class=hr><div class=graph-title>Heart Rate Trend</div><i class="fa-circle-info fa-solid" data-modal=heartrate></i></div><div class=chart-container><canvas id=heartRateChart></canvas></div><div class=time-range><button class=time-btn type=button aria-label=time-btn accesskey=d>1D</button> <button class="time-btn active" type=button aria-label=time-btn accesskey=w>1W</button> <button class=time-btn type=button aria-label=time-btn accesskey=m>1M</button> <button class=time-btn type=button aria-label=time-btn accesskey=y>1Y</button></div></div><div class=graph-card><div class=hr><div class=graph-title>Blood Pressure Trend</div><i class="fa-circle-info fa-solid" data-modal=blood></i></div><div class=chart-container><canvas id=bpChart></canvas></div><div class=time-range><button class=time-btn type=button aria-label=d accesskey=d>1D</button> <button class="time-btn active" type=button aria-label=time-btn accesskey=w>1W</button> <button class=time-btn type=button aria-label=m accesskey=m>1M</button> <button class=time-btn type=button aria-label=y accesskey=y>1Y</button></div></div><div class=graph-card><div class=hr><div class=graph-title>Sleep Time Trend</div><i class="fa-circle-info fa-solid" data-modal=lights></i></div><div class=chart-container><canvas id=spChart></canvas></div><div class=time-range><button class=time-btn type=button aria-label=d accesskey=d>1D</button> <button class="time-btn active" type=button aria-label=time-btn accesskey=w>1W</button> <button class=time-btn type=button aria-label=m accesskey=m>1M</button> <button class=time-btn type=button aria-label=y accesskey=y>1Y</button></div></div><div class=graph-card><div class=hr><div class=graph-title>Voice Analysis</div><i class="fa-circle-info fa-solid" data-modal=voice></i></div><div class=chart-container><canvas id=voidChart></canvas></div><div class=time-range><button class=time-btn type=button aria-label=d accesskey=d>1D</button> <button class="time-btn active" type=button aria-label=time-btn accesskey=w>1W</button> <button class=time-btn type=button aria-label=m accesskey=m>1M</button> <button class=time-btn type=button aria-label=y accesskey=y>1Y</button></div></div></div></div></div><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==" src=https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js></script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==" src=https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js></script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==" src=https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js></script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==" src=https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js></script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==">document.addEventListener("DOMContentLoaded",function(){let e=document.getElementById("progress-bar"),t=document.getElementById("progress"),a=document.getElementById("meter"),n=0;function o(){t.setAttribute("aria-valuenow",n),t.setAttribute("value",n),a.setAttribute("aria-valuenow",n)}setTimeout(()=>{n=30,e.style.width=n+"%",o()},10);let l=setInterval(()=>{n<90&&(100<(n+=15*Math.random())&&(n=100),e.style.width=n+"%",o())},300);window.addEventListener("load",()=>{clearInterval(l),n=100,e.style.width="100%",o(),setTimeout(()=>{n=0,e.style.width="0",o(),console.log("%c Profile of this website creator!","color:#2dc9ac;");console.table({"GALIH RIDHO UTOMO":{Mail:"g4lihru@students.unnes.ac.id"},"Ana Maulida":{Mail:"anamaulida@students.unnes.ac.id"}});console.log("Follow We!\nGALIH RIDHO UTOMO https://instagram.com/galih_ridho_utomo\nAna Maulida https://instagram.com/anma1505"),e.parentNode.removeChild(e)},500)})})</script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==">class CameraPermissionModal{constructor(){this.modal=document.getElementById("cameraModal"),this.nocamElement=document.getElementById("nocam"),this.modalContent=document.getElementById("contentModal"),this.modalContent&&(this.modalContent.style.transform="translateY(0px)"),this.checkCameraPermission()}async checkCameraPermission(){try{var e=await navigator.permissions.query({name:"camera"});this.handlePermissionState(e.state)}catch(e){try{var t=await navigator.mediaDevices.getUserMedia({video:!0});this.handlePermissionGranted(),t.getTracks().forEach(e=>e.stop())}catch(e){this.handlePermissionDenied()}}}handlePermissionState(e){"granted"===e?this.handlePermissionGranted():this.handlePermissionDenied()}handlePermissionGranted(){localStorage.setItem("cameraPermissionGranted","true"),this.hideElements()}handlePermissionDenied(){localStorage.setItem("cameraPermissionGranted","false"),this.showElements(),this.initializeModal()}hideElements(){this.modal&&(this.modal.style.display="none"),this.nocamElement&&(this.nocamElement.style.display="none")}showElements(){this.modal&&(this.modal.style.display="block"),this.modalContent&&(this.modalContent.style.transform="translateY(0px)")}initializeModal(){this.modal&&(this.modalContent=document.getElementById("contentModal"),this.modalBody=this.modal.querySelector(".modal-body"),this.closeBtn=this.modal.querySelector(".close-btn"),this.modalContent&&(this.modalContent.style.transform="translateY(0px)"),this.setupSwipeHandling(),this.setupButtons())}setupSwipeHandling(){let t=0,s=0;this.modalContent.addEventListener("touchstart",e=>{t=e.touches[0].clientY}),this.modalContent.addEventListener("touchmove",e=>{e=(s=e.touches[0].clientY)-t;0<e&&(this.modalContent.style.transform=`translateY(${e}px)`)}),this.modalContent.addEventListener("touchend",()=>{150<s-t?this.requestCameraPermission():this.modalContent.style.transform="translateY(0px)"})}setupButtons(){var e=document.getElementById("enableCamera"),t=document.getElementById("disableCamera");e?.addEventListener("click",()=>{this.requestCameraPermission()}),t?.addEventListener("click",()=>{localStorage.setItem("cameraPermissionGranted","false"),this.showElements(),this.hideModal()}),this.closeBtn?.addEventListener("click",()=>{this.requestCameraPermission()})}async requestCameraPermission(){try{var e=await navigator.mediaDevices.getUserMedia({video:!0});this.handlePermissionGranted(),e.getTracks().forEach(e=>e.stop())}catch(e){console.error("Izin kamera ditolak:",e),this.handlePermissionDenied()}}hideModal(){this.modal&&(this.modal.style.display="none")}}document.addEventListener("DOMContentLoaded",()=>new CameraPermissionModal)</script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==">document.querySelectorAll(".skip-link").forEach(t=>{t.addEventListener("click",function(t){t.preventDefault();t=this.getAttribute("href").substring(1),t=document.getElementById(t);t&&(t.setAttribute("tabindex","-1"),t.focus(),t.addEventListener("blur",function(){this.removeAttribute("tabindex")},{once:!0}),t.scrollIntoView({behavior:"smooth"}))})})</script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==">"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("https://4211421036.github.io/MentalHealth/sw.js").then(e=>{console.log("Service Worker registered with scope: ",e.scope)}).catch(e=>{console.error("Service Worker registration failed:",e)})})</script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==">window.onload=function(){var e=document.getElementById("skeleton-container");e.parentNode.removeChild(e)};let videoElement=document.getElementById("video"),canvasElement=document.getElementById("canvas"),canvasCtx=canvasElement.getContext("2d"),lastFaceID=null;function djb2Hash(t){let a=5381;for(let e=0;e<t.length;e++)a=33*a^t.charCodeAt(e);return a>>>0}function generateFaceID(e){return djb2Hash(e.map(e=>e.x.toFixed(4)+e.y.toFixed(4)+e.z.toFixed(4)).join("")).toString(16)}let EMOTION_THRESHOLDS={HAPPY:.65,SAD:.6,ANGRY:.55,SURPRISED:.5,NEUTRAL:.7},faceMesh=new FaceMesh({locateFile:e=>"https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/"+e});function analyzeEmotions(e){let t={happy:calculateHappiness(e),sad:calculateSadness(e),angry:calculateAnger(e),surprised:calculateSurprise(e),neutral:calculateNeutral(e)},a=Object.values(t).reduce((e,t)=>e+t,0);return Object.keys(t).forEach(e=>{t[e]=(t[e]/a*100).toFixed(1)}),t}function calculateHappiness(e){var t=e[61],a=e[291],a=Math.hypot(a.x-t.x,a.y-t.y),t=e[123],t=e[159].y-t.y;return e[61]&&e[291]&&e[123]&&e[159]?Math.min(1,2*a+3*t):0}function calculateSadness(e){var t=e[61],t=e[17].y-t.y,e=(e[105].y+e[334].y)/2;return Math.min(1,1.5*t+2*e)}function calculateAnger(e){var t=e[46],t=e[105].y-t.y,e=e[17].y-e[0].y;return Math.min(1,2*t+1.2*e)}function calculateSurprise(e){var t=e[159],t=e[145].y-t.y,e=e[152].y-e[4].y;return Math.min(1,2*t+.8*e)}function calculateNeutral(a){let n=0;return[[152,4],[61,291],[105,334]].forEach(([e,t])=>{n+=Math.hypot(a[e].x-a[t].x,a[e].y-a[t].y)}),Math.max(0,1-2*n)}function getMentalHealthConclusion(e){var{happy:e,sad:t,angry:a,neutral:n}=e;return 40<t&&e<20&&n<30?{conclusion:"Potensi gejala depresi terdeteksi",advice:"Rekomendasi: Konsultasi dengan profesional kesehatan mental. Pola emosi menunjukkan tanda-tanda depresi.\nKunjungi Media Sosial Berikut Untuk Berkonsultasi\n https://www.instagram.com/peercounselor.unnes?igsh=MXhodHc0bmhpdGdnag=="}:35<a&&e<25?{conclusion:"Tingkat stres tinggi terdeteksi",advice:"Rekomendasi: Lakukan teknik relaksasi dan perhatikan pola tidur."}:60<n?{conclusion:"Emosi stabil",advice:"Pertahankan keseimbangan emosional. Tidak terdeteksi masalah kesehatan mental signifikan."}:{conclusion:"Kondisi emosional normal",advice:"Tidak terdeteksi gangguan mental utama. Tetap pantau kesehatan emosi Anda."}}function autoLinkify(e){return e.replace(/(https?:\/\/[^\s]+)/g,e=>`<a href='${e}' target='_blank' title='${e}'>${e}</a>`)}async function updateUI(e){Object.entries(e).forEach(([e,t])=>{document.getElementById(e).textContent=t});e=getMentalHealthConclusion(e);document.getElementById("conclusion").textContent=e.conclusion,document.getElementById("advice").innerHTML=autoLinkify(e.advice)}function updateUI(e){Object.entries(e).forEach(([e,t])=>{document.getElementById(e).textContent=t});e=getMentalHealthConclusion(e);document.getElementById("conclusion").textContent=e.conclusion,document.getElementById("advice").textContent=e.advice}function drawLandmarks(e){canvasCtx.fillStyle="#00FF00",e.forEach(e=>{var t=e.x*canvasElement.width,e=e.y*canvasElement.height;canvasCtx.beginPath(),canvasCtx.arc(t,e,1,0,+Math.PI),canvasCtx.fill()})}faceMesh.setOptions({maxNumFaces:1,refineLandmarks:!0,minDetectionConfidence:.5,minTrackingConfidence:.5}),faceMesh.onResults(e=>{canvasCtx.save(),canvasCtx.clearRect(0,0,canvasElement.width,canvasElement.height),canvasCtx.drawImage(e.image,0,0,canvasElement.width,canvasElement.height);var t,a;e.multiFaceLandmarks&&0<e.multiFaceLandmarks.length?((a=generateFaceID(t=e.multiFaceLandmarks[0]))!==lastFaceID&&(document.head.setAttribute("FaceID",a),lastFaceID=a),a=analyzeEmotions(t),updateUI(a),e.multiFaceLandmarks.forEach(e=>{drawLandmarks(e)})):null!==lastFaceID&&(document.head.setAttribute("FaceID",""),lastFaceID=null),canvasCtx.restore()});let camera=new Camera(videoElement,{onFrame:async()=>{await faceMesh.send({image:videoElement})},width:640,height:480}),heartRateChart=(camera.start(),null),bpChart=null,lightChart=null,voiceChart=null,audioContext,analyzer,mediaRecorder,audioData=[],isRecording=!1,VOICE_ANALYSIS_CONFIG={FREQUENCY_THRESHOLDS:{LOW:85,NORMAL:250,HIGH:400},SPEECH_RATE:{SLOW:120,NORMAL:150,RAPID:200},JITTER_THRESHOLD:.015,SHIMMER_THRESHOLD:.065,PAUSE_THRESHOLD:.5,SAMPLE_RATE:44100},GSR_URL="https://4211421036.github.io/MentalHealth/GSR.json",MAX30102_URL="https://4211421036.github.io/MentalHealth/MAX30102.json",BH1750_URL="https://4211421036.github.io/MentalHealth/BH1750.json";async function fetchSensorData(){try{var[e,t,a]=await Promise.all([fetch(GSR_URL),fetch(MAX30102_URL),fetch(BH1750_URL)]),[n,r,o]=await Promise.all([e.json(),t.json(),a.json()]);return{gsrData:n,maxData:r,bhData:o}}catch(e){return console.error("Error fetching sensor data:",e),null}}function analyzeMentalHealthIndicators(e){let t={depression:0,anxiety:0,normal:0,ptsd:0,bipolar:0,schizophrenia:0},a=(e.frequency<VOICE_ANALYSIS_CONFIG.FREQUENCY_THRESHOLDS.LOW&&e.speechRate<VOICE_ANALYSIS_CONFIG.SPEECH_RATE.SLOW&&3<e.pausePatterns.longPauses&&(t.depression+=.4),e.frequency>VOICE_ANALYSIS_CONFIG.FREQUENCY_THRESHOLDS.HIGH&&e.speechRate>VOICE_ANALYSIS_CONFIG.SPEECH_RATE.RAPID&&e.jitter>VOICE_ANALYSIS_CONFIG.JITTER_THRESHOLD&&(t.anxiety+=.4),e.frequency>VOICE_ANALYSIS_CONFIG.FREQUENCY_THRESHOLDS.HIGH&&e.shimmer>VOICE_ANALYSIS_CONFIG.SHIMMER_THRESHOLD&&2<e.pausePatterns.longPauses&&(t.ptsd+=.4),e.frequency>VOICE_ANALYSIS_CONFIG.FREQUENCY_THRESHOLDS.HIGH&&e.speechRate>VOICE_ANALYSIS_CONFIG.SPEECH_RATE.RAPID&&e.jitter>VOICE_ANALYSIS_CONFIG.JITTER_THRESHOLD&&e.shimmer>VOICE_ANALYSIS_CONFIG.SHIMMER_THRESHOLD&&(t.bipolar+=.4),e.frequency<VOICE_ANALYSIS_CONFIG.FREQUENCY_THRESHOLDS.LOW&&e.speechRate<VOICE_ANALYSIS_CONFIG.SPEECH_RATE.SLOW&&e.jitter>VOICE_ANALYSIS_CONFIG.JITTER_THRESHOLD&&e.shimmer>VOICE_ANALYSIS_CONFIG.SHIMMER_THRESHOLD&&(t.schizophrenia+=.4),e.frequency>=VOICE_ANALYSIS_CONFIG.FREQUENCY_THRESHOLDS.LOW&&e.frequency<=VOICE_ANALYSIS_CONFIG.FREQUENCY_THRESHOLDS.HIGH&&e.speechRate>=VOICE_ANALYSIS_CONFIG.SPEECH_RATE.SLOW&&e.speechRate<=VOICE_ANALYSIS_CONFIG.SPEECH_RATE.RAPID&&(t.normal+=.4),Object.values(t).reduce((e,t)=>e+t,0));return 0<a&&Object.keys(t).forEach(e=>{t[e]=t[e]/a}),t}function calculateFundamentalFrequency(n){var r=n.length,o=new Float32Array(r);for(let a=0;a<r;a++){let t=0;for(let e=0;e<r-a;e++)t+=n[e]*n[e+a];o[a]=t}let t=-1,a=0;for(let e=30;e<r/2;e++)o[e]>a&&(a=o[e],t=e);return t?VOICE_ANALYSIS_CONFIG.SAMPLE_RATE/t:0}function calculateSpeechRate(t){let a=0;for(let e=1;e<t.length;e++)(0<=t[e]&&t[e-1]<0||t[e]<0&&0<=t[e-1])&&a++;var e=t.length/VOICE_ANALYSIS_CONFIG.SAMPLE_RATE,e=a/2*(60/e);return Math.min(VOICE_ANALYSIS_CONFIG.SPEECH_RATE.RAPID,Math.max(VOICE_ANALYSIS_CONFIG.SPEECH_RATE.SLOW,e/2.5))}function calculateJitter(t){let a=0;var n=[];for(let e=1;e<t.length-1;e++)t[e]>t[e-1]&&t[e]>t[e+1]&&n.push(e);for(let e=1;e<n.length;e++){var r=Math.abs(n[e]-n[e-1]);a+=r}return 1<n.length?a/(n.length-1)/VOICE_ANALYSIS_CONFIG.SAMPLE_RATE:0}function calculateShimmer(t){let a=0;var n=[];for(let e=1;e<t.length-1;e++)Math.abs(t[e])>Math.abs(t[e-1])&&Math.abs(t[e])>Math.abs(t[e+1])&&n.push(Math.abs(t[e]));for(let e=1;e<n.length;e++)a+=Math.abs(n[e]-n[e-1])/Math.max(n[e],n[e-1]);return 1<n.length?a/(n.length-1):0}function analyzePausePatterns(t){let a=0,n=!1,r=0;for(let e=0;e<t.length;e++)Math.abs(t[e])<.01?(r++,!n&&r>VOICE_ANALYSIS_CONFIG.PAUSE_THRESHOLD*VOICE_ANALYSIS_CONFIG.SAMPLE_RATE&&(n=!0,a++)):(r=0,n=!1);return{longPauses:a}}function extractVoiceMetrics(e){return{frequency:calculateFundamentalFrequency(e),speechRate:calculateSpeechRate(e),jitter:calculateJitter(e),shimmer:calculateShimmer(e),pausePatterns:analyzePausePatterns(e)}}function startContinuousAnalysis(){let t=new Float32Array(analyzer.frequencyBinCount);!function e(){analyzer.getFloatTimeDomainData(t),updateVoiceChart(analyzeMentalHealthIndicators(extractVoiceMetrics(t))),requestAnimationFrame(e)}()}let navItems=document.querySelectorAll(".nav-item"),modals=document.querySelectorAll(".modal"),closeBtns=document.querySelectorAll(".close-btn"),timeButtons=document.querySelectorAll(".time-btn"),currentFaceID=document.documentElement.getAttribute("FaceID"),deviceElement=document.querySelector(".device"),deviceModal=document.getElementById("deviceModal"),modalBody=deviceModal.querySelector(".modal-body"),modalBodyID=document.getElementById("modalBody"),bluetoothDevice=null,notifIcon=document.querySelector(".notif"),notifikasiModal=document.getElementById("notifikasiModal");function initializeCharts(){heartRateChart&&heartRateChart.destroy(),bpChart&&bpChart.destroy(),lightChart&&lightChart.destroy(),voiceChart&&voiceChart.destroy();var e=document.getElementById("heartRateChart").getContext("2d"),e=(heartRateChart=new Chart(e,{type:"line",data:{labels:[],datasets:[{label:"Heart Rate (BPM)",data:[],borderColor:"#4CAF50",tension:.4,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1}}),document.getElementById("bpChart").getContext("2d")),e=(bpChart=new Chart(e,{type:"line",data:{labels:[],datasets:[{label:"GSR (Skin Conductance)",data:[],borderColor:"#FF9800",tension:.4,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1}}),document.getElementById("spChart").getContext("2d")),e=(lightChart=new Chart(e,{type:"line",data:{labels:[],datasets:[{label:"Light Chart",data:[],borderColor:"#FF9800",tension:.4,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1}}),document.getElementById("voidChart").getContext("2d"));voiceChart=new Chart(e,{type:"line",data:{labels:[],datasets:[{label:"Depression Risk",data:[],borderColor:"rgba(255, 99, 132, 1)",tension:.4,fill:!1},{label:"Anxiety Risk",data:[],borderColor:"rgba(54, 162, 235, 1)",tension:.4,fill:!1},{label:"Normal Range",data:[],borderColor:"rgba(75, 192, 192, 1)",tension:.4,fill:!1},{label:"PTSD Risk",data:[],borderColor:"rgba(153, 102, 255, 1)",tension:.4,fill:!1},{label:"Bipolar Risk",data:[],borderColor:"rgba(255, 159, 64, 1)",tension:.4,fill:!1},{label:"Schizophrenia Risk",data:[],borderColor:"rgba(255, 206, 86, 1)",tension:.4,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"}},scales:{x:{type:"time",time:{unit:"minute",tooltipFormat:"PPpp"},title:{display:!0,text:"Time"}},y:{min:0,max:1,beginAtZero:!0,title:{display:!0,text:"Risk Level"}}}}})}async function updateCharts(){var e,t,a,n=await fetchSensorData();n&&({gsrData:n,maxData:e,bhData:t}=n,a=(new Date).toLocaleTimeString(),heartRateChart&&(heartRateChart.data.labels.push(a),heartRateChart.data.datasets[0].data.push(e.heartRate||0),10<heartRateChart.data.labels.length&&heartRateChart.data.labels.shift(),10<heartRateChart.data.datasets[0].data.length&&heartRateChart.data.datasets[0].data.shift(),heartRateChart.update()),bpChart&&(bpChart.data.labels.push(a),bpChart.data.datasets[0].data.push(n.gsr||0),10<bpChart.data.labels.length&&bpChart.data.labels.shift(),10<bpChart.data.datasets[0].data.length&&bpChart.data.datasets[0].data.shift(),bpChart.update()),lightChart)&&(lightChart.data.labels.push(a),lightChart.data.datasets[0].data.push(t.lux||0),10<lightChart.data.labels.length&&lightChart.data.labels.shift(),10<lightChart.data.datasets[0].data.length&&lightChart.data.datasets[0].data.shift(),lightChart.update())}async function updateData(){var e,t,a=await fetchSensorData();a&&({gsrData:a,maxData:e,bhData:t}=a,updateMetrics(e?.bpm??"N/A",a?.tonic??"N/A",t?.lux??"N/A"))}function updateMetrics(e,t,a){document.getElementById("heartRate").textContent=0!==e&&"N/A"!==e?e:"N/A",document.getElementById("bloodPressure").textContent="N/A"!==t?Math.round(t):"N/A/N/A",document.getElementById("sleepHours").textContent="N/A"!==a?a.toFixed(1):"N/A"}function updateVoiceChart(e){var t;voiceChart&&(t=new Date,voiceChart.data.labels.push(t),voiceChart.data.datasets[0].data.push(e.depression),voiceChart.data.datasets[1].data.push(e.anxiety),voiceChart.data.datasets[2].data.push(e.normal),voiceChart.data.datasets[3].data.push(e.ptsd),voiceChart.data.datasets[4].data.push(e.bipolar),voiceChart.data.datasets[5].data.push(e.schizophrenia),60<voiceChart.data.labels.length&&(voiceChart.data.labels.shift(),voiceChart.data.datasets.forEach(e=>e.data.shift())),voiceChart.update("none"))}async function initializeVoiceAnalysis(){try{var e=await navigator.mediaDevices.getUserMedia({audio:!0});audioContext=new(window.AudioContext||window.webkitAudioContext),(analyzer=audioContext.createAnalyser()).fftSize=2048,audioContext.createMediaStreamSource(e).connect(analyzer),mediaRecorder=new MediaRecorder(e),startContinuousAnalysis()}catch(e){console.error("Error initializing voice analysis:",e)}}async function scanDevices(){try{modalBodyID.innerHTML='<div class="loading">Mencari perangkat...</div>',bluetoothDevice=await navigator.bluetooth.requestDevice({acceptAllDevices:!0,optionalServices:["4fafc201-1fb5-459e-8fcc-c5c9c331914b"]}),updateDeviceStatus("connected"),setupDisconnectHandler(),connectToDevice()}catch(e){console.error("Error:",e),"NotFoundError"===e.name?updateDeviceStatus("not found"):updateDeviceStatus("failed")}}function updateDeviceStatus(e,t="MentalHealthDevice"){deviceElement.setAttribute("state",e),deviceElement.textContent=t,deviceModal.classList.remove("show")}function setupDisconnectHandler(){bluetoothDevice.addEventListener("gattserverdisconnected",()=>{updateDeviceStatus("failed"),resetSensorData()})}async function connectToDevice(){try{var e=await(await(await bluetoothDevice.gatt.connect()).getPrimaryService("4fafc201-1fb5-459e-8fcc-c5c9c331914b")).getCharacteristic("beb5483e-36e1-4688-b7f5-ea07361b26a8");await e.startNotifications(),e.addEventListener("characteristicvaluechanged",handleSensorData)}catch(e){console.error("Koneksi gagal:",e),updateDeviceStatus("failed")}}function handleSensorData(e){e=e.target.value,e={heartRate:e.getUint8(0),bloodPressure:e.getUint8(1)+"/"+e.getUint8(2),sleep:e.getFloat32(3)};updateSensorData(e),updateCharts(e)}function updateSensorData(e){document.querySelector(".metric-card.green .metric-value").textContent=e.heartRate,document.querySelector(".metric-card.orange .metric-value").textContent=e.bloodPressure,document.querySelector(".metric-card.purple .metric-value").textContent=e.sleep.toFixed(1)}function resetSensorData(){updateSensorData({heartRate:"--",bloodPressure:"--/--",sleep:"0.0"})}notifIcon.addEventListener("click",()=>{notifikasiModal.classList.add("show")}),navigator.bluetooth||(deviceElement.setAttribute("state","not found"),console.error("Browser tidak mendukung Web Bluetooth API")),deviceElement.addEventListener("click",async()=>{deviceModal.classList.add("show"),await scanDevices()}),document.addEventListener("DOMContentLoaded",()=>{initializeCharts(),initializeVoiceAnalysis(),updateCharts(),updateData(),setInterval(updateCharts,1e3),setInterval(updateData,1e3)}),document.querySelector('[data-page="graph"]').addEventListener("click",()=>{setTimeout(initializeCharts,300)}),navItems.forEach(e=>{e.addEventListener("click",()=>{navItems.forEach(t=>{t.addEventListener("click",()=>{navItems.forEach(e=>e.classList.remove("active")),t.classList.add("active");var e=t.dataset.page;"history"===e?document.getElementById("historyModal").classList.add("show"):"graph"===e&&document.getElementById("graphModal").classList.add("show")})}),timeButtons.forEach(e=>{e.addEventListener("click",()=>{e.closest(".graph-card").querySelectorAll(".time-btn").forEach(e=>e.classList.remove("active")),e.classList.add("active")})}),closeBtns.forEach(e=>{e.addEventListener("click",()=>{e.closest(".modal").classList.remove("show")})}),modals.forEach(t=>{var e=t.querySelector(".modal-header");let a=t.querySelector(".modal-content"),n=0,r=0,o=!1;e.addEventListener("touchstart",e=>{e=e.touches[0];n=e.clientY,o=!0}),t.addEventListener("touchmove",e=>{var t;o&&(t=e.touches[0],0<(t=(r=t.clientY)-n))&&(a.style.transform=`translateY(${t}px)`,e.preventDefault())}),t.addEventListener("touchend",()=>{o&&(100<r-n&&t.classList.remove("show"),a.style.transform="",o=!1,n=0,r=0)}),t.addEventListener("click",e=>{e.target===t&&t.classList.remove("show")})});let t=document.querySelector(".cards-container"),a=!1,n,r;t.addEventListener("touchstart",e=>{a=!0,n=e.touches[0].pageX-t.offsetLeft,r=t.scrollLeft}),t.addEventListener("touchmove",e=>{a&&(e.preventDefault(),e=2*(e.touches[0].pageX-t.offsetLeft-n),t.scrollLeft=r-e)}),t.addEventListener("touchend",()=>{a=!1})})}),modals.forEach(t=>{var e=t.querySelector(".modal-header");let a=t.querySelector(".modal-content"),n=0,r=0,o=!1;e.addEventListener("touchstart",e=>{e=e.touches[0];n=e.clientY,o=!0}),t.addEventListener("touchmove",e=>{var t;o&&(t=e.touches[0],0<(t=(r=t.clientY)-n))&&(a.style.transform=`translateY(${t}px)`,a.style.transition="transform 0.1s",e.preventDefault())}),t.addEventListener("touchend",()=>{var e;o&&(e=r-n,a.style.transition="transform 0.3s",100<e?(t.classList.remove("show"),a.style.transform="translateY(100%)",setTimeout(()=>{a.style.transform="",a.style.transition=""},300)):a.style.transform="",o=!1,n=0,r=0)}),t.addEventListener("click",e=>{e.target===t&&t.classList.remove("show")})}),closeBtns.forEach(e=>{e.addEventListener("click",()=>{e.closest(".modal").classList.remove("show")})});let modalContents={blood:{title:"Informasi Blood Pressure",content:"Blood pressure atau tekanan darah adalah tekanan yang dialami dinding pembuluh darah saat darah dipompa oleh jantung ke seluruh tubuh. Pengukuran normal adalah 120/80 mmHg."},emosional:{title:"Informasi Metric Emosional",content:`
                <p>Metric emosional menunjukkan persentase emosi yang terdeteksi dari ekspresi wajah. Ini membantu memahami kondisi emosional pengguna sepanjang waktu.</p>
                <br>
                <img src="./infoemo.png" alt="Emotion Metrics" />
                <p>Gambar 1 Ilustrasi unit tindakan wajah (AU) yang mengindentifikasikan Mental Health. Dari Baris 1 Kiri ke Kanan (AU 1, AU 2 AU 4 AU 5 AU 6 AU 7); Baris 2 Kiri ke Kanan (AU 10 AU 12 AU 14 AU 15 AU 16 AU 18); dan Baris 3 Kiri ke kanan (AU 22 AU 25 AU 26 AU 43).
                <br>`},sensor:{title:"Informasi Realtime Sensor",content:"Sensor realtime menampilkan data kesehatan terkini seperti detak jantung, tekanan darah, dan durasi tidur yang diukur menggunakan sensor yang terhubung."},heartrate:{title:"Informasi Heart Rate",content:"Sensor realtime menampilkan data kesehatan terkini seperti detak jantung, tekanan darah, dan durasi tidur yang diukur menggunakan sensor yang terhubung."}};document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll(".fa-circle-info");let a=0,n=null;function r(e){e.classList.remove("active"),setTimeout(()=>{e&&e.parentNode&&e.parentNode.removeChild(e),n===e&&(n=null)},300)}function o(e){a=e.touches[0].clientY}function i(e){var t;a&&0<(t=e.touches[0].clientY-a)&&(e.preventDefault(),this.querySelector(".modal-content").style.transform=`translateY(${t}px)`)}function s(e){var t;n&&(t=n.querySelector(".modal-content"),100<e.changedTouches[0].clientY-a&&r(n),t.style.transform="",a=null)}e.forEach(e=>{e.addEventListener("click",function(){var t=this.getAttribute("data-modal"),a=modalContents[t];if(a){let e=document.querySelector(`.modal[data-type="${t}"]`);e||(e=((e,t)=>{let a=document.createElement("div");return a.className="modal",a.setAttribute("data-type",e),a.innerHTML=`
                    <div class="modal-content" data-type="${e}-content">
                        <div class="swipe-indicator"></div>
                        <div class="modal-header">
                            <h2 class="modal-title">${t.title}</h2>
                            <button class="close-btn">&times;</button>
                        </div>
                        <div class="modal-body">
                            ${t.content}
                        </div>
                    </div>
                `,a.addEventListener("touchstart",o,!1),a.addEventListener("touchmove",i,!1),a.addEventListener("touchend",s,!1),a.querySelector(".close-btn").addEventListener("click",()=>{r(a)}),a})(t,a),document.body.appendChild(e)),(n=e).classList.add("active")}})})})</script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==">function toggleTheme(){var e=document.body,t=document.querySelector(".theme-toggle i");e.classList.toggle("dark-theme"),e.classList.contains("dark-theme")?(t.className="fas fa-sun",localStorage.setItem("theme","dark")):(t.className="fas fa-moon",localStorage.setItem("theme","light"))}document.addEventListener("DOMContentLoaded",()=>{var e=localStorage.getItem("theme"),t=window.matchMedia("(prefers-color-scheme: dark)").matches,a=document.querySelector(".theme-toggle i");e?document.body.classList.toggle("dark-theme","dark"===e):document.body.classList.toggle("dark-theme",t),document.body.classList.contains("dark-theme")?a.className="fas fa-sun":a.className="fas fa-moon"})</script><script nonce="Tj5CgpxR6rmmzfLmCPy5ig==">function loadThirdParty(e){var r,a=e.dataset.src,t=e.dataset.type;"script"===t?((r=document.createElement("script")).src=a,r.async=!0,e.parentNode.replaceChild(r,e)):"iframe"===t&&((r=document.createElement("iframe")).src=a,Object.assign(r,{width:e.dataset.width||"100%",height:e.dataset.height||"100%",frameborder:"0"}),e.parentNode.replaceChild(r,e)),performance.mark("third-party-load-"+a),performance.measure("third-party-loading","app-init-start","third-party-load-"+a)}performance.mark("app-init-start");let observer=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(loadThirdParty(e.target),observer.unobserve(e.target))})},{rootMargin:"50px"});function sendPerformanceMetrics(){var e=performance.getEntriesByType("measure");console.log("Performance metrics:",e)}window.addEventListener("pageshow",function(e){performance.mark("pageshow-start"),e.persisted&&(console.log("Page restored from bfcache"),performance.measure("bfcache-restoration","pageshow-start"))}),window.addEventListener("load",function(){performance.mark("page-load-complete"),performance.measure("total-page-load","app-init-start","page-load-complete"),document.querySelectorAll("[data-lazy]").forEach(e=>{observer.observe(e)})}),window.addEventListener("pagehide",function(e){console.log("Page is being unloaded")}),document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&(performance.mark("page-hide"),performance.measure("page-visible-duration","app-init-start","page-hide"),sendPerformanceMetrics(),console.log("Page hidden, prepare for restoration"))})</script></body></html>